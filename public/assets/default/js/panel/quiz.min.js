!function(t){"use strict";function e(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=0;a<5;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}t("body").on("click","#add_multiple_question",function(a){a.preventDefault();var i=t(this).attr("data-quiz-id"),n=t(".multipleQuestionModal"+i).clone(),r="correctAnswerSwitch"+e();n.find("label.js-switch").attr("for",r),n.find("input.js-switch").attr("id",r);var o=e();n.find(".panel-file-manager").attr("data-input",o),n.find(".lfm-input").attr("id",o),n.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box"),Swal.fire({html:n.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),t("body").on("click",".add-answer-btn",function(a){a.preventDefault();var i=t(".add-answer-container .main-answer-box"),n=i.clone();n.removeClass("main-answer-box"),n.find(".answer-remove").removeClass("d-none");var r="correctAnswerSwitch"+e();n.find("label.js-switch").attr("for",r),n.find("input.js-switch").attr("id",r);var o=e();n.find(".panel-file-manager").attr("data-input",o),n.find(".lfm-input").attr("id",o),n.find('input[type="checkbox"]').prop("checked",!1);var s=n.prop("innerHTML"),d=e();s=(s=s.replace(/\[record\]/g,"["+d+"]")).replace(/\[\d+\]/g,"["+d+"]"),n.html(s),n.find('input[type="checkbox"]').prop("checked",!1),n.find('input[type="text"]').val(""),i.parent().append(n)}),t("body").on("click",".answer-remove",function(e){e.preventDefault(),t(this).closest(".add-answer-card").remove()}),t("body").on("click","#add_descriptive_question",function(e){e.preventDefault();var a=t(this).attr("data-quiz-id"),i=t(".descriptiveQuestionModal"+a).clone();Swal.fire({html:i.html(),showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem"})}),t("body").on("change",".js-switch",function(){var e=t(this);e.closest(".js-switch-parent");this.checked&&(t(".js-switch").each(function(){t(this).closest(".js-switch-parent").find('input[type="checkbox"]').prop("checked",!1)}),e.prop("checked",!0))}),t("body").on("click",".save-question",function(e){e.preventDefault();var a=t(this),i=a.closest(".quiz-questions-form"),n=serializeObjectByTag(i),r=i.attr("data-action");a.addClass("loadingbar primary").prop("disabled",!0),i.find("input").removeClass("is-invalid"),i.find("textarea").removeClass("is-invalid"),t.post(r,n,function(t){t&&200===t.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue py-25">'+saveSuccessLang+"</h3>",showConfirmButton:!1,width:"25rem"}),setTimeout(function(){window.location.reload()},500))}).fail(function(t){a.removeClass("loadingbar primary").prop("disabled",!1);var e=t.responseJSON;e&&e.errors&&Object.keys(e.errors).forEach(function(t){var a=e.errors[t],n=i.find(".js-ajax-"+t);n.addClass("is-invalid"),n.parent().find(".invalid-feedback").text(a[0])})})}),t("body").on("click",".edit_question",function(a){a.preventDefault();var i=t(this).attr("data-question-id");loadingSwl(),t.get("/panel/quizzes-questions/"+i+"/edit",function(a){if(a&&a.html){var i='<div id="editQuestion">'+a.html+"</div>";Swal.fire({html:i,showCancelButton:!1,showConfirmButton:!1,customClass:{content:"p-0 text-left"},width:"48rem",onOpen:function(){var a=t("#editQuestion");a.find(".main-answer-row").removeClass("main-answer-row").addClass("main-answer-box");var i=e();a.find(".panel-file-manager").first().attr("data-input",i),a.find(".lfm-input").first().attr("id",i);var n="correctAnswerSwitch"+e();a.find("label.js-switch").first().attr("for",n),a.find("input.js-switch").first().attr("id",n),feather.replace()}})}})}),t("body").on("click",".js-submit-quiz-form",function(e){e.preventDefault();var a=t(this),i=a.closest(".quiz-form"),n=serializeObjectByTag(i),r=i.attr("data-action");a.addClass("loadingbar primary").prop("disabled",!0),i.find("input").removeClass("is-invalid"),i.find("textarea").removeClass("is-invalid"),t.post(r,n,function(t){t&&200===t.code&&(Swal.fire({icon:"success",html:'<h3 class="font-20 text-center text-dark-blue">'+saveSuccessLang+"</h3>",showConfirmButton:!1}),setTimeout(function(){t.redirect_url&&""!==t.redirect_url?window.location.href=t.redirect_url:window.location.reload()},2e3))}).fail(function(t){a.removeClass("loadingbar primary").prop("disabled",!1);var e=t.responseJSON;e&&e.errors&&Object.keys(e.errors).forEach(function(t){var a=e.errors[t],n=i.find(".js-ajax-"+t);n.addClass("is-invalid"),n.parent().find(".invalid-feedback").text(a[0])})})}),t("body").on("change",".js-ajax-webinar_id",function(e){var a="/panel/chapters/getAllByWebinarId/"+t(this).val(),i=t(".js-ajax-chapter_id");i.addClass("loadingbar gray"),t.get(a,function(t){if(t&&t.chapters){var e='<option value="">'+quizzesSectionLang+"</option>";Object.keys(t.chapters).forEach(function(a){var i=t.chapters[a];e+='<option value="'+i.id+'">'+i.title+"</option>"}),i.removeClass("loadingbar gray"),i.html(e)}})})}(jQuery);
